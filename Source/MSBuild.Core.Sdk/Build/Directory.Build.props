<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<!--
		Determine the path to the directory build props file if the user did not disable $(ImportDirectoryBuildProps) and
		they did not already specify an absolute path to use via $(DirectoryBuildPropsPath)
	-->
	<PropertyGroup Condition="'$(DirectoryBuildPropsPath)' == ''">
		<DirectoryBuildPropsFile Condition="'$(DirectoryBuildPropsFile)' == ''">Directory.Build.props</DirectoryBuildPropsFile>
		<DirectoryBuildPropsBasePath Condition="'$(DirectoryBuildPropsBasePath)' == ''">$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildProjectDirectory), '$(DirectoryBuildPropsFile)'))</DirectoryBuildPropsBasePath>
		<DirectoryBuildPropsPath Condition="'$(DirectoryBuildPropsBasePath)' != '' AND '$(DirectoryBuildPropsFile)' != ''">$([System.IO.Path]::Combine('$(DirectoryBuildPropsBasePath)', '$(DirectoryBuildPropsFile)'))</DirectoryBuildPropsPath>
	</PropertyGroup>

	<PropertyGroup Condition="Exists('$(DirectoryBuildPropsPath)')">
		<MSBuildAllProjects>$(MSBuildAllProjects);$(DirectoryBuildPropsPath)</MSBuildAllProjects>
	</PropertyGroup>

	<Import Project="$(DirectoryBuildPropsPath)" Condition="Exists('$(DirectoryBuildPropsPath)')"/>

	<PropertyGroup>
		<MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
	</PropertyGroup>

</Project>