<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<PropertyGroup>
		<MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
	</PropertyGroup>

	<ItemGroup Condition="'$(EnableDefaultSettingsItems)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<None Update="**\*.settings" SubType="Designer"/>
	</ItemGroup>

	<ItemGroup Condition="'$(EnableDefaultSettingsItems)' == 'true' AND '$(EnableSettingsGenerator)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<None Update="**\*.settings">
			<Generator>SettingsSingleFileGenerator</Generator>
			<LastGenOutput>%(Filename)$(DefaultDesignerFileSuffix)$(DefaultLanguageSourceExtension)</LastGenOutput>
		</None>

		<_SettingsFiles Include="**\*.settings">
			<GenFilePath>%(RecursiveDir)%(Filename)$(DefaultDesignerFileSuffix)$(DefaultLanguageSourceExtension)</GenFilePath>
		</_SettingsFiles>

		<Compile Update="@(_SettingsFiles->'%(GenFilePath)')">
			<AutoGen>true</AutoGen>
			<DesignTime>true</DesignTime>
			<DesignTimeSharedInput>true</DesignTimeSharedInput>
			<DependentUpon>$([MSBuild]::ValueOrDefault('%(Filename)', '').Replace('$(DefaultDesignerFileSuffix)', '.settings'))</DependentUpon>
		</Compile>
	</ItemGroup>

	<ItemGroup Condition="'$(EnableDefaultAspNetItems)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<!-- TODO: Add Support ASP.NET Projects -->
	</ItemGroup>

	<ItemGroup Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<Compile Update="**\*$(DefaultDesignerFileSuffix)$(DefaultLanguageSourceExtension)">
			<DependentUpon Condition="'%(DependentUpon)' == ''">$([MSBuild]::ValueOrDefault('%(Filename)', '').Replace('$(DefaultDesignerFileSuffix)', '$(DefaultLanguageSourceExtension)'))</DependentUpon>
		</Compile>
	</ItemGroup>

	<ItemGroup Condition="'$(EnableDefaultWinFormsItems)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<EmbeddedResource Update="**\*.resx" Condition="'$(EnableDefaultEmbeddedResourceItems)' == 'true' AND '$(EnableEmbeddedResourceCodeGenerator)' == 'true'">
			<DependentUpon Condition="'$(DependentUpon)' != ''">$([System.Text.RegularExpressions.Regex]::Replace('%(FileName)', '$(LangIdRegEx)|\$(DefaultDesignerFileSuffix)', '%(DefaultLanguageSourceExtension)'))</DependentUpon>
		</EmbeddedResource>
		<!--
			TODO: Add SubType(s) for Windows Forms Project
			ISSUE: SubType(s) for Windows Forms Project doesn't work in CPS anyway!
		-->
		<Service Include="$(UserControlDesignerService)" Condition="'$(EnableUserControlDesigner)' == 'true'"/>
	</ItemGroup>

	<ItemGroup Condition="'$(DisableImplicitFrameworkReferences)' != 'true' AND '$(EnableImplicitWpfReferences)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<_SdkImplicitReference Include="System.Xaml" Condition="'$(_TargetFrameworkVersionWithoutV)' >= '3.5'"/>
		<_SdkImplicitReference Include="WindowsBase" Condition="'$(_TargetFrameworkVersionWithoutV)' >= '4.0'"/>
		<_SdkImplicitReference Include="PresentationCore" Condition="'$(_TargetFrameworkVersionWithoutV)' >= '4.0'"/>
		<_SdkImplicitReference Include="PresentationFramework" Condition="'$(_TargetFrameworkVersionWithoutV)' >= '4.0'"/>
	</ItemGroup>

	<ItemGroup Condition="'$(DisableImplicitFrameworkReferences)' != 'true' AND '$(EnableImplicitAspNetReferences)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<_SdkImplicitReference Include="System.Web"/>
		<_SdkImplicitReference Include="System.Web.Http"/>
		<_SdkImplicitReference Include="System.Net.Http"/>
	</ItemGroup>

	<ItemGroup Condition="'$(DisableImplicitFrameworkReferences)' != 'true' AND '$(EnableImplicitWinFormsReferences)' == 'true' AND '$(TargetFrameworkIdentifier)' == '.NETFramework'">
		<_SdkImplicitReference Include="System.Design"/>
		<_SdkImplicitReference Include="System.Drawing"/>
		<_SdkImplicitReference Include="System.Deployment"/>
		<_SdkImplicitReference Include="System.Windows"/>
		<_SdkImplicitReference Include="System.Windows.Forms"/>
	</ItemGroup>

</Project>